## 1) Что вы знаете про Индексы?

Индексы — это традиционное средство увеличения производительности БД. 
Когда мы добавляем новую строку в таблицу, СУБД не размещает строки в числовом порядке значений столбца `id` или 
в алфавитном порядке значений столбца `last_name`, а добавляет 
их в следующее доступное место в файле (СУБД поддерживает список свободных мест для каждой таблицы).

Это приводит к тому, что для выполнения запроса типа:

```mysql
SELECT email FROM Users WHERE email LIKE 'l%';
```

Серверу базы данных приходится проверять каждую строку таблицы, чтобы найти соответствия. Это подходит для маленьких 
таблиц, но становится чрезмерно времязатратным по мере роста объёма данных.

Индексы функционируют как предметные указатели в книге, позволяя быстро находить информацию без прочтения всего текста.
Они представляют собой специальные таблицы, строки которых, в отличие от обычных таблиц данных, расположены в строго определённом порядке. Но вместо того, чтобы содержать все данные о некоторой записи, индекс содержит только столбец (или столбцы), используемый, чтобы найти строки в таблице данных, вместе с информацией, описывающей, где физически расположена эта строка. Таким образом, роль индексов состоит в том, чтобы облегчить поиск подмножества строк и столбцов таблицы без необходимости сканировать каждую строку в таблице.

Можно добавить индекс к столбцу email, чтобы ускорить любые запросы, которые работают со значением этого столбца.

Вот как можно добавить такой индекс в СУБД MySQL:

```MySQL
CREATE INDEX idx_email
    ON Users (email);
```

При наличии индекса оптимизатор запросов может выбрать использование индекса, если сочтёт это полезным. 
Если в таблице имеется более одного индекса, оптимизатор должен решить, применение какого именно индекса наиболее 
выгодно для конкретной инструкции SQL.

Когда таблица была создана, MySQL автоматически сгенерировала индекс для столбца первичного ключа, которым в данном 
случае является id, и присвоил индексу имя PRIMARY.

2) Что вы знаете про кластерные Индексы?

это вот который по порядку. вот когда айдишник создаешь - это кластерный индекс

3) Что вы знаете про не кластерные Индексы?



4) Сколько индексов может быть в состоянии?



5) В индексе индексируется одно поле или несколько?

```
SELECT id, first_name, last_name
  FROM Student
  WHERE first_name LIKE 'A%' AND last_name LIKE 'L%'
```

В ответ на такой запрос СУБД может выбрать один из нескольких подходов:

    Произвести полное сканирование всех строк таблицы.
    Воспользоваться индексом по столбцу last_name для поиска студентов с фамилией на «L», а затем проверить каждую из этих строк на соответствие имени, начинающегося на «A».
    Использовать составной индекс по last_name и first_name для непосредственного нахождения студентов, удовлетворяющих обоим критериям.

Но как определить, какой из методов выберет оптимизатор запросов MySQL? Для этого можно использовать команду EXPLAIN, 
которая показывает, как СУБД планирует выполнить запрос, не запуская его фактически:

6) Есть ли какое-то ограничение по количеству индексов на одну таблицу?



7) Есть ли логическое ограничение какое количество нужно делать?



8) Могут ли индексы отрицательно влиять на запросы, через запятую каких запросов?



9) Как данные хранятся в индексе?



10) Таблицы без индексов называются куча?



11) Имеет ли когда либо использовать такие таблицы?



12) Как данные хранятся в таблицах Кучах?



13) План выполните запроса, через запятую индекс скан и индекс-сикк?



14) Что такое операция lookup?



15) Что такое статистика? Как с ней работать? Примеры работы.



16) Что такое транзакции?

Транзакция — это одиночная операция или группа операций, которые должны быть выполнены как одно целое. 
Транзакция - набор команд, которые могут быть выполнены либо полностью, либо не выполнены вообще. 
В postgreSQL представлены в формате:
```
BEGIN;
SAVEPOINT my_savepoint;
…
ROLLBACK to my_savepoint;
COMMIT;
```

17) Что такое блокировки ?

Блокировка транзакций - механизм, предотвращающий одновременную запись в базу данных разных транзакций. 
Перед записью транзакция захватывает блокировку, а после записи освобождает, чтобы в базу данных могли 
записывать другие транзакции.

18) Уровни изоляции транзакций?

Аномалии транзакции - ситуация, когда корректные транзакции некорректно работают вместе (с одними и теми же данными). 
То есть при выполнении параллельных транзакций возникают нежелательные эффекты.
Это происходит из-за того, что перемешивается порядок выполнения операций: нельзя считать, что сначала выполняются все 
операции одной транзакции, а только потом — все операции другой.

Основные типы аномалий:
- Феномен грязного чтения (dirty read) — чтение данных, измененных незавершенной транзакцией.
Чтение данных, которые были изменены другой транзакцией, но еще не зафиксированы.
- Феномен неповторяемого чтения (non-repeatable read) — изменение данных между двумя чтениями в одной транзакции.
Повторное чтение данных в рамках одной транзакции дает разные результаты из-за изменений в другой транзакции.
- Феномен фантомного чтения (phantom read) — появление новых строк, подходящих под условия запроса, между двумя 
запросами в одной транзакции.
Появление новых строк в результате выполнения другой транзакции. 
- Аномалия сериализации - состояние, при котором результат выполнения параллельных транзакций не равен тому, что был бы,
если транзакции выполнялись последовательно

Изоляция транзакций - механизм, позволяющий предотвратить возникновение аномалий транзакций за счет их последовательного 
выполнения.

Уровни изоляции определяют, как и когда изменения, сделанные одной транзакцией, видны другим.
В стандарте SQL есть 4 уровня изоляции транзакций:
- Read uncommitted

Позволяет читать незавершенные транзакции.

- Read committed

Гарантирует, что транзакция видит только завершенные данные.

- Repeatable read

Гарантирует, что данные, прочитанные в транзакции, останутся неизменными до её завершения.

- Serialisable

Обеспечивает полную изоляцию, предотвращая неконсистентное состояние базы данных.


Каждый уровень изоляции поддерживает свой набор аномалий:

Уровень изоляции	|Dirty Read	|Non-Repeatable Read	|Phantom Read	|Аномалии сериализации

Read Uncommitted	|❌ Да	    |❌ Да	            |❌ Да	        |❌ Да

Read Committed	    |✅ Нет	    |❌ Да	            |❌ Да	        |❌ Да

Repeatable Read	    |✅ Нет	    |✅ Нет	            |❌ Да	        |❌ Да

Serializable	    |✅ Нет	    |✅ Нет	            |✅ Нет	        |✅ Нет
